<h1 class="title">Characters</h1>

<div class="character-list">
  @for (character of characterService.characters; track $index) {
    <div class="character-item">
      <a [routerLink]="['/characters/', character.id]" class="character-link">
        <div class="character-card">
          <img
            [src]="character.image"
            alt="Character avatar"
          />
          <span class="character-name">{{ character.name }} {{ character.species }}</span>
        </div>
      </a>
      <div class="character-actions">
        <button class="btn btn-edit" title="Modificar personaje" (click)="openEditModal(character)">
          <span class="btn-icon">âœï¸</span>
        </button>
        <button class="btn btn-delete" title="Borrar personaje" (click)="openDeleteModal()">
          <span class="btn-icon">ğŸ—‘ï¸</span>
        </button>
      </div>
    </div>
  }
</div>
@if (isModalOpen) {
  <div class="modal-backdrop">
    <div class="modal">

      <h2>Editar personaje</h2>

      <input [(ngModel)]="selectedCharacter.name" placeholder="Name">
      <input [(ngModel)]="selectedCharacter.status" placeholder="Status">
      <input [(ngModel)]="selectedCharacter.gender" placeholder="Gender">
      <input [(ngModel)]="selectedCharacter.species" placeholder="Species">
      <input [(ngModel)]="selectedCharacter.image" placeholder="Image URL">

      <div class="modal-buttons">
        <button class="btn btn-edit" (click)="updateCharacter()">
          Guardar
        </button>

        <button class="btn btn-delete" (click)="closeModal()">
          Cancelar
        </button>
      </div>

    </div>
  </div>
}
@if (isDeleteModalOpen) {
  <div class="modal-backdrop">
    <div class="modal">

      <h2>Confirmar eliminaciÃ³n</h2>

      <p>
        Â¿Seguro que quieres borrar a 
        <strong>{{ selectedCharacter.name }}</strong>?
      </p>

      <div class="modal-buttons">
        <button class="btn btn-delete" (click)="confirmDelete()">
          SÃ­, borrar
        </button>

        <button class="btn btn-edit" (click)="closeDeleteModal()">
          Cancelar
        </button>
      </div>

    </div>
  </div>
}
